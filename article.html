<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>mixmag.info</title>
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <div class="wrap">
        <div class="logo">mixmag.info</div>
        <div class="nav-items">
            <a href="/mixmag">Articles</a>
        </div>

        <div id="article" class="article">
            <!-- Article content will be loaded here -->
        </div>
    </div>

    <script>
        async function fetchArticle() {
            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get('id');
            const response = await fetch(`http://localhost:3000/api/articles/${id}`);
            const article = await response.json();

            const date = new Date(article.pub_date * 1000);

            document.getElementById('article').innerHTML = `
               <h1 class="article-title">${article.title}</h1>
               ${article.announcement ? `<div class="article-announcement">${article.announcement}</div>` : ''}
               <div class="article-content">${article.description}</div>
               <div class="article-meta">
                   Published: ${date.toLocaleDateString()}
                   <br>
                   Views: ${article.views}
               </div>
           `;
        }

        fetchArticle();
    </script>
</body>

</html>